{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\masat\\\\mlm-system\\\\src\\\\components\\\\Auth\\\\Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../../utils/supabaseClient';\nimport { Box, TextField, Button, Typography, Container, Card, CardContent, Link } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    userId: '',\n    confirmPassword: ''\n  });\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (formData.password !== formData.confirmPassword) {\n      alert(\"パスワードが一致しません\");\n      return;\n    }\n    try {\n      setLoading(true);\n      // Supabaseで新規ユーザー登録\n      const {\n        data,\n        error\n      } = await supabase.auth.signUp({\n        email: formData.email,\n        password: formData.password,\n        options: {\n          data: {\n            user_id: formData.userId,\n            role: 'user' // デフォルトで一般ユーザー\n          }\n        }\n      });\n      if (error) throw error;\n\n      // ユーザープロフィールテーブルにも登録\n      if (data.user) {\n        const {\n          error: profileError\n        } = await supabase.from('profiles').insert([{\n          id: data.user.id,\n          user_id: formData.userId,\n          email: formData.email,\n          role: 'user'\n        }]);\n        if (profileError) throw profileError;\n      }\n      alert(\"登録確認メールを送信しました。メールを確認してください。\");\n      navigate('/');\n    } catch (error) {\n      alert(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            component: \"h1\",\n            gutterBottom: true,\n            align: \"center\",\n            children: \"\\u65B0\\u898F\\u767B\\u9332\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            component: \"form\",\n            onSubmit: handleSubmit,\n            noValidate: true,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              margin: \"normal\",\n              required: true,\n              fullWidth: true,\n              id: \"userId\",\n              label: \"\\u30E6\\u30FC\\u30B6\\u30FCID\",\n              name: \"userId\",\n              autoFocus: true,\n              value: formData.userId,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              margin: \"normal\",\n              required: true,\n              fullWidth: true,\n              id: \"email\",\n              label: \"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",\n              name: \"email\",\n              autoComplete: \"email\",\n              value: formData.email,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              margin: \"normal\",\n              required: true,\n              fullWidth: true,\n              name: \"password\",\n              label: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",\n              type: \"password\",\n              value: formData.password,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              margin: \"normal\",\n              required: true,\n              fullWidth: true,\n              name: \"confirmPassword\",\n              label: \"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\uFF08\\u78BA\\u8A8D\\uFF09\",\n              type: \"password\",\n              value: formData.confirmPassword,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              fullWidth: true,\n              variant: \"contained\",\n              sx: {\n                mt: 3,\n                mb: 2\n              },\n              disabled: loading,\n              children: loading ? '登録中...' : '登録'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                textAlign: 'center'\n              },\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/\",\n                variant: \"body2\",\n                children: \"\\u3059\\u3067\\u306B\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u304A\\u6301\\u3061\\u306E\\u65B9\\u306F\\u3053\\u3061\\u3089\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n}\n_s(Register, \"37JyQLuEii00Kw4vOdjH8pYD2T8=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useNavigate","supabase","Box","TextField","Button","Typography","Container","Card","CardContent","Link","jsxDEV","_jsxDEV","Register","_s","navigate","loading","setLoading","formData","setFormData","email","password","userId","confirmPassword","handleChange","e","target","name","value","handleSubmit","preventDefault","alert","data","error","auth","signUp","options","user_id","role","user","profileError","from","insert","id","message","maxWidth","children","sx","mt","variant","component","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","noValidate","margin","required","fullWidth","label","autoFocus","onChange","autoComplete","type","mb","disabled","textAlign","href","_c","$RefreshReg$"],"sources":["C:/Users/masat/mlm-system/src/components/Auth/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../../utils/supabaseClient';\r\nimport { Box, TextField, Button, Typography, Container, Card, CardContent, Link } from '@mui/material';\r\n\r\nexport default function Register() {\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: '',\r\n        userId: '',\r\n        confirmPassword: ''\r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (formData.password !== formData.confirmPassword) {\r\n            alert(\"パスワードが一致しません\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            // Supabaseで新規ユーザー登録\r\n            const { data, error } = await supabase.auth.signUp({\r\n                email: formData.email,\r\n                password: formData.password,\r\n                options: {\r\n                    data: {\r\n                        user_id: formData.userId,\r\n                        role: 'user' // デフォルトで一般ユーザー\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (error) throw error;\r\n\r\n            // ユーザープロフィールテーブルにも登録\r\n            if (data.user) {\r\n                const { error: profileError } = await supabase\r\n                    .from('profiles')\r\n                    .insert([\r\n                        {\r\n                            id: data.user.id,\r\n                            user_id: formData.userId,\r\n                            email: formData.email,\r\n                            role: 'user'\r\n                        }\r\n                    ]);\r\n\r\n                if (profileError) throw profileError;\r\n            }\r\n\r\n            alert(\"登録確認メールを送信しました。メールを確認してください。\");\r\n            navigate('/');\r\n        } catch (error) {\r\n            alert(error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container maxWidth=\"sm\">\r\n            <Box sx={{ mt: 8 }}>\r\n                <Card>\r\n                    <CardContent>\r\n                        <Typography variant=\"h4\" component=\"h1\" gutterBottom align=\"center\">\r\n                            新規登録\r\n                        </Typography>\r\n                        <Box component=\"form\" onSubmit={handleSubmit} noValidate>\r\n                            <TextField\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"userId\"\r\n                                label=\"ユーザーID\"\r\n                                name=\"userId\"\r\n                                autoFocus\r\n                                value={formData.userId}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <TextField\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"email\"\r\n                                label=\"メールアドレス\"\r\n                                name=\"email\"\r\n                                autoComplete=\"email\"\r\n                                value={formData.email}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <TextField\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                name=\"password\"\r\n                                label=\"パスワード\"\r\n                                type=\"password\"\r\n                                value={formData.password}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <TextField\r\n                                margin=\"normal\"\r\n                                required\r\n                                fullWidth\r\n                                name=\"confirmPassword\"\r\n                                label=\"パスワード（確認）\"\r\n                                type=\"password\"\r\n                                value={formData.confirmPassword}\r\n                                onChange={handleChange}\r\n                            />\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"contained\"\r\n                                sx={{ mt: 3, mb: 2 }}\r\n                                disabled={loading}\r\n                            >\r\n                                {loading ? '登録中...' : '登録'}\r\n                            </Button>\r\n                            <Box sx={{ textAlign: 'center' }}>\r\n                                <Link href=\"/\" variant=\"body2\">\r\n                                    すでにアカウントをお持ちの方はこちら\r\n                                </Link>\r\n                            </Box>\r\n                        </Box>\r\n                    </CardContent>\r\n                </Card>\r\n            </Box>\r\n        </Container>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}